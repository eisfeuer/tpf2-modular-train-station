local TrackUtils = require('motras_trackutils')

describe('TrackUtils', function ()
    
    describe('addEdgesToEdgeList', function ()
        it('adds edges to a single edge list', function ()
            local edgeList = {
                edges = {
                    { { 18, 2.0, 0.0 }, {-2.0, 0.0, 0.0 } },
                    { { 20, 2.0, 0.0 }, {-2.0, 0.0, 0.0 } },

                    { { 2, 2.0, 0.0 }, {-16.0, 0.0, 0.0 } },
                    { { 18, 2.0,  0.0 }, {-16.0, 0.0, 0.0 } },
                },
                snapNodes = {0},
                tag2nodes = {}
            }

            TrackUtils = TrackUtils.addEdgesToEdgeList(edgeList, {
                { {10.0, 4.0, 0.0}, {-20.0, 0.0, 0.0} },
                { {-10.0, 4.0, 0.0}, {-20.0, 0.0, 0.0} },

                { {10.0, 6.0, 0.0}, {-20.0, 0.0, 0.0} },
                { {-10.0, 6.0, 0.0}, {-20.0, 0.0, 0.0} },
            }, {0, 2}, '__1234', {0, 1, 2, 3})

            assert.are.same({
                edges = {
                    { { 18, 2.0, 0.0 }, {-2.0, 0.0, 0.0 } },
                    { { 20, 2.0, 0.0 }, {-2.0, 0.0, 0.0 } },

                    { { 2, 2.0, 0.0 }, {-16.0, 0.0, 0.0 } },
                    { { 18, 2.0,  0.0 }, {-16.0, 0.0, 0.0 } },

                    { {10.0, 4.0, 0.0}, {-20.0, 0.0, 0.0} },
                    { {-10.0, 4.0, 0.0}, {-20.0, 0.0, 0.0} },

                    { {10.0, 6.0, 0.0}, {-20.0, 0.0, 0.0} },
                    { {-10.0, 6.0, 0.0}, {-20.0, 0.0, 0.0} },
                },
                snapNodes = {0, 4, 6},
                tag2nodes = {
                    __1234 = {4, 5, 6, 7}
                }
            }, edgeList)
        end)
    end)
end)